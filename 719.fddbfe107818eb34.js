"use strict";(self.webpackChunkleanix_test_task=self.webpackChunkleanix_test_task||[]).push([[719],{2719:(G,y,r)=>{r.r(y),r.d(y,{RepositoryModule:()=>z});var l=r(9808),_=r(3692),Z=r(5861),u=r(6141),m=r(2323);const d=o=>o.repositories,T=(0,m.P1)(d,o=>o.repositories),A=(0,m.P1)(d,o=>o.selectedRepository),L=(0,m.P1)(d,o=>o.pagination),D=(0,m.P1)(d,o=>o.repositoryCount);var h=r(6698),t=r(5e3),C=r(3797),c=r(4999),x=r(5899);function b(o,n){1&o&&(t.TgZ(0,"th",12),t._uU(1," Name"),t.qZA())}function O(o,n){if(1&o&&(t.TgZ(0,"td",13),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.xp6(1),t.hij(" ",e.name," ")}}function k(o,n){1&o&&(t.TgZ(0,"th",12),t._uU(1," Owner"),t.qZA())}function w(o,n){if(1&o&&(t.TgZ(0,"td",13),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.xp6(1),t.hij(" ",e.owner.login," ")}}function Y(o,n){1&o&&(t.TgZ(0,"th",12),t._uU(1," Description"),t.qZA())}function M(o,n){if(1&o&&(t.TgZ(0,"td",13),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.xp6(1),t.hij(" ",e.description," ")}}function P(o,n){1&o&&t._UZ(0,"tr",14)}function S(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"tr",15),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw(3).navigateToDetails(s)}),t.qZA()}}function $(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"div",3),t.NdJ("scroll",function(a){const g=t.CHM(e).ngIf;return t.oxw(2).onTableScroll(a,g)}),t.TgZ(1,"table",4),t.ynx(2,5),t.YNc(3,b,2,0,"th",6),t.YNc(4,O,2,1,"td",7),t.BQk(),t.ynx(5,8),t.YNc(6,k,2,0,"th",6),t.YNc(7,w,2,1,"td",7),t.BQk(),t.ynx(8,9),t.YNc(9,Y,2,0,"th",6),t.YNc(10,M,2,1,"td",7),t.BQk(),t.YNc(11,P,1,0,"tr",10),t.YNc(12,S,1,0,"tr",11),t.qZA()()}if(2&o){const e=t.oxw().ngIf,i=t.oxw();t.xp6(1),t.Q6J("dataSource",e),t.xp6(10),t.Q6J("matHeaderRowDef",i.displayedColumns)("matHeaderRowDefSticky",!0),t.xp6(1),t.Q6J("matRowDefColumns",i.displayedColumns)}}function I(o,n){1&o&&t._UZ(0,"mat-progress-bar",16)}function N(o,n){if(1&o&&(t.ynx(0),t.YNc(1,$,13,4,"div",1),t.ALo(2,"async"),t.YNc(3,I,1,0,"mat-progress-bar",2),t.ALo(4,"async"),t.BQk()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",t.lcZ(2,2,e.pagination$)),t.xp6(2),t.Q6J("ngIf",t.lcZ(4,4,e.loading$))}}let Q=(()=>{class o{constructor(e,i,a){this.repositoryService=e,this.router=i,this.store=a,this.displayedColumns=["name","owner","description"],this.loading$=this.store.select(s=>(0,h.x)(s)),this.repositories$=this.store.select(s=>T(s)),this.pagination$=this.store.select(s=>L(s)),this.repositoryCount$=this.store.select(s=>D(s))}ngOnInit(){this.pagination$.subscribe(e=>{(null==e?void 0:e.startCursor)||this.store.dispatch((0,u.ER)({first:30}))})}navigateToDetails({name:e,owner:i,databaseId:a}){var s=this;return(0,Z.Z)(function*(){yield s.router.navigate([`/repositories/${a}`],{queryParams:{name:e,owner:i.login}})})()}onTableScroll(e,i){e.target.scrollTop>e.target.scrollHeight-e.target.offsetHeight&&this.store.dispatch((0,u.ER)({first:30,after:i.endCursor}))}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(C.b),t.Y36(_.F0),t.Y36(m.yh))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-list-repository"]],decls:2,vars:3,consts:[[4,"ngIf"],["id","table-container","class","table-container",3,"scroll",4,"ngIf"],["mode","indeterminate",4,"ngIf"],["id","table-container",1,"table-container",3,"scroll"],["mat-table","",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","owner"],["matColumnDef","description"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",3,"click",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["mat-header-row",""],["mat-row","",3,"click"],["mode","indeterminate"]],template:function(e,i){1&e&&(t.YNc(0,N,5,6,"ng-container",0),t.ALo(1,"async")),2&e&&t.Q6J("ngIf",t.lcZ(1,1,i.repositories$))},directives:[l.O5,c.BZ,c.w1,c.fO,c.ge,c.Dz,c.ev,c.as,c.XQ,c.nj,c.Gk,x.pW],pipes:[l.Ov],styles:["table[_ngcontent-%COMP%]{width:100%}"]}),o})();var U=r(5245),p=r(9224),f=r(7657);function J(o,n){if(1&o&&(t.TgZ(0,"mat-chip-list")(1,"mat-chip")(2,"mat-chip-avatar"),t._UZ(3,"img",7),t.qZA(),t._uU(4),t.qZA()()),2&o){const e=n.$implicit;t.xp6(3),t.Q6J("src",e.avatar_url,t.LSH),t.xp6(1),t.hij(" ",e.login," ")}}const H=function(o){return{"background-image":o}};function B(o,n){if(1&o&&(t.TgZ(0,"mat-card",4)(1,"mat-card-header"),t._UZ(2,"div",5),t.TgZ(3,"mat-card-title"),t._uU(4),t.qZA(),t.TgZ(5,"mat-card-subtitle"),t._uU(6),t.qZA()(),t.TgZ(7,"mat-card-content")(8,"p"),t._uU(9),t.qZA()(),t.TgZ(10,"mat-card-actions"),t.YNc(11,J,5,2,"mat-chip-list",6),t.qZA()()),2&o){const e=n.ngIf;t.xp6(2),t.Q6J("ngStyle",t.VKq(5,H,"url("+e.owner.avatarUrl+")")),t.xp6(2),t.Oqu(e.name),t.xp6(2),t.Oqu(e.owner.login),t.xp6(3),t.hij(" ",e.description," "),t.xp6(2),t.Q6J("ngForOf",e.contributors)}}function q(o,n){if(1&o&&(t.ynx(0),t.TgZ(1,"a",2)(2,"mat-icon"),t._uU(3,"chevron_left"),t.qZA(),t.TgZ(4,"span"),t._uU(5,"Back"),t.qZA()(),t.YNc(6,B,12,7,"mat-card",3),t.ALo(7,"async"),t.BQk()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("routerLink","/repositories"),t.xp6(5),t.Q6J("ngIf",t.lcZ(7,2,e.repository$))}}function E(o,n){1&o&&t._UZ(0,"mat-progress-bar",8)}const F=[{path:"",component:Q},{path:":id",component:(()=>{class o{constructor(e,i,a){this.repositoryService=e,this.route=i,this.store=a,this.loading$=this.store.select(s=>(0,h.x)(s)),this.repository$=this.store.select(s=>A(s))}ngOnInit(){this.route.queryParams.subscribe(({name:e,owner:i})=>{this.store.dispatch((0,u.Ag)({name:e,owner:i}))})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(C.b),t.Y36(_.gz),t.Y36(m.yh))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-details-repository"]],decls:5,vars:4,consts:[[4,"ngIf","ngIfElse"],["loading",""],[1,"back-link",3,"routerLink"],["class","card",4,"ngIf"],[1,"card"],["mat-card-avatar","",1,"header-image",3,"ngStyle"],[4,"ngFor","ngForOf"],["alt","",3,"src"],["mode","indeterminate"]],template:function(e,i){if(1&e&&(t.TgZ(0,"div"),t.YNc(1,q,8,4,"ng-container",0),t.ALo(2,"async"),t.YNc(3,E,1,0,"ng-template",null,1,t.W1O),t.qZA()),2&e){const a=t.MAs(4);t.xp6(1),t.Q6J("ngIf",!t.lcZ(2,2,i.loading$))("ngIfElse",a)}},directives:[l.O5,_.yS,U.Hw,p.a8,p.dk,p.kc,l.PC,p.n5,p.$j,p.dn,p.hq,l.sg,f.qn,f.HS,f.EC,x.pW],pipes:[l.Ov],styles:[".header-image[_ngcontent-%COMP%]{background-size:cover}mat-chip-list[_ngcontent-%COMP%]{display:inline-block;padding:8px}mat-chip-list[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:40px}.back-link[_ngcontent-%COMP%]{display:inline-block;font-size:20px}.back-link[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:inline-block;height:24px;vertical-align:top;line-height:24px}.back-link[_ngcontent-%COMP%]:focus{color:#2f4f4f}"]}),o})()}];let j=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[_.Bz.forChild(F)],_.Bz]}),o})(),z=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[l.ez,j]]}),o})()}}]);